# Auto Warriors Game

Тестовое задание в Леста Академию. Выполнялось **неделю**. Игра - консольное приложение на C++. Весь [код документирован](https://albionvisual.github.io/AutoWarriors-game/) при помощи Doxygen. Реализация имеет особенность: почти все данные отделены от логики игры, что позволяет геймдизайнеру легко изменять поведение персонажей изменением настроек (констант в коде). Условие задания описано [здесь](https://github.com/AlbionVisual/AutoWarriors-game/blob/main/docs/Тестовое_задание_Программирование.pdf).

https://github.com/user-attachments/assets/f43fd243-f2c7-4553-9da5-01789f1373fd

Подробнее описано [ниже](#auto-warriors-game-1).

## Структура проекта

```
social/             # Хранение визуальных материалов
docs/               # Хранение документации проекта
src/                # Исходный код
    characters/     # Классы персонажей (игрок + враги)
    data/           # Данные, из которых строится игра (модификации здесь влияют на всю игру)
    utils/          # Вспомогательные функции (кроссплатформенная работа с консолью)
    visualisation/  # Классы для отрисовки игры в консоли
    main.cpp        # Входная точка проекта
README.md           # Вы находитесь здесь)
```

## Подготовка к работе над исходным кодом

1. Склонируйте репозиторий:

   ```
   git clone https://github.com/AlbionVisual/AutoWarriors-game
   cd AutoWarriors-game
   ```

2. Удалите папку docs (она генерируется вручную и при изменении документации в самом коде, эта папка начнёт содержать неактуальную информацию). Доступ к документации у вас всё равно останется через [GitHub Pages](https://albionvisual.github.io/AutoWarriors-game/).

3. Любым способом скомпилируйте всю src директорию как C++ проект (крайне необходимо включить все .cpp файлы в сборщик, иначе ничего не запустится).

## Технологии

```
C++
Doxygen
```

## Auto Warriors Game

### Правила

Игрок выбирает начального персонажа, а вместе с ним и бонус первого уровня этого персонажа. У выбранного персонажа сразу появляется оружие и начальные характеристики. Значения каждой из характеристик, а также бонусов расписаны в [условии](https://github.com/AlbionVisual/AutoWarriors-game/blob/main/docs/Тестовое_задание_Программирование.pdf). Ловкость обозначения как agility, выносливость как endurance, сила - strength. Также необходимо различать вид оружия и тип его урона, но эти характеристики скрыты от игрока в виду их сложности и маловлиятельности.

После выбора первого персонажа и задания начальных характеристик создаётся случайный враг с заданными характеристиками и наградой. Далее высвечивается единая таблица с характеристиками всех персонажей. В первой строке - названия, во второй - характеристики игрока, в третьей - характеристики врага, с которым идёт бой, в четвёртой и т. д. все побеждённые враги (у них будет здоровье в значении 0).

Картинка 1

После создания первого игрока сразу запускается первый бой. Надпись You --> Enemy показывает состояние боя. Стрелка указывает в направлении удара. Если урон был нанесён, то слева от игрока (либо справа от врага) появляется соответствующая надпись с количеством снятого здоровья. Также обновляется и здоровье в самой таблице. Так, если в таблице здоровье у какого-то из персонажей станет нулём, бой закончится. Если 0 у игрока, то вы проиграли. Если ноль у врага, то включается выбор наград.

Во время боя также появляются сообщения. Каждое сообщение свидетельствует либо о промахнувшейся атаке, либо об использовании какой-то способности, будь то у врага, либо у игрока. Также во время боя все изменяющиеся характеристики будут подсвечиваться на секунду разными цветами: если изменение в положительную сторону - зелёным, если в отрицательную - красным.

Фильм 2

После боя на месте сообщений появятся надписи о выборе дополнительного класса для игрока, а также выбора оружия (оставить своё оружие, либо поднять с побеждённого врага).

Всего может быть только 5 боёв, причём в последних двух не спрашивается повышение класса. Если игрок победит все 5 раз, то высветится надпись о победе.

### Как работает игра изнутри

Проект разбивается на 4 важные части: персонажи, данные, утилиты и визуализация. Каждой соответствует одна папка.

#### Данные (папка data)

В этой папке хранятся все настраиваемые константы.

В коде используются перечисления, обозначающие каждый класс персонажа, врага, а также обозначающие определённые эффекты (постэффекты), чтобы можно было ссылаться в соотношениях (такой-то враг имеет такой-то эффект / постэффект). Из условия видно, что и у игрока, и у каких-то врагов могут совпадать способности. Чтобы не переписывать одни и те же методы, функции эффектов и постэффектов - общие.

В чём разница эффектов и постэффектов? В условии уже указывается на их различие. Эффекты применяются перед ударом вашего персонажа, а постэффекты при получении урона вашим персонажем. Каждая описываемая способность будет либо эффектом, либо постэффектом.

Также различается частота использования эффектов: есть бонусы +1 к какой-то характеристике и они, явно, должны применяться только раз не только за бой, но и за всю игру (если игрок выбирает этот бонус). Для реализации этого бонуса тоже будет исопльзоваться эффект, но с отслеживанием количества использования. Такие использованные эффекты отслеживаются в каждом из объектов персонажей по-отдельности.

#### Персонажи (папка characters)

Персонажи делятся на два типа: игрок и враг. Каждому соответствует отдельный класс (Player и Enemy соответственно). Оба класса наследуются от класса Pawn, который обладает общими для них свойствами. Player, в сравнении с Enemy, содержит немного большую функциональность (поэтому в его методах больше кода, но функциональность по сути остаётся одной и той же). Pawn содержит основной метод удара Pawn::attacked_by(const Pawn&, int), который считает

И игрок, и враг имеют свои классы, описанные в [условии](https://github.com/AlbionVisual/AutoWarriors-game/blob/main/docs/Тестовое_задание_Программирование.pdf). К каждому классу игрока поставляются: начальное оружие, эффекты на определённом уровне класса (не путать с постэффектами - способностями персонажа при атаке врага), постэффекты на определённом уровне класса. Для каждого класса врагов определяются все его характеристики включая нестандартный урон от оружия и награду за победу, применяемые эффекты и постэффекты (если таковые есть).

#### Утилиты (папка utils)

Здесь лежат лишь две функции-помощницы, которые стирают консоль и перекрашивают выводимый текст соответственно. Реализация этих функций разнится на разных системах из-за поставляемого API, поэтому для каждой функции предложено по две реализации.

#### Визуализация (папка visualisaion)

Самые важные два класса: Game (отвечает за порядок проведения всей игры) и GameDrawer (отвечает за отрисовку и расскраску таблицы, битвы и сообщений).
